Our undelete first finds and reads in the super block, then creates the directory for the recovered files. For each block group, it examines the inode bitmap in the block group and looks for all free inode numbers. For each free inode number, if the inode has been previously used (the deletion time is non-zero) and it corresponds to a file, then the file is restored, otherwise, nothing happens. Files are restored by first creating a file file-nnnnn where nnnnn is the inode number, then the content of the file is restored by using the inode's pointer to the data blocks, finally the access time and modification time is restored by using the inode's i_atime and i_mtime.
